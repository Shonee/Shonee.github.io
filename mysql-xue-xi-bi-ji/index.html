<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySQL学习笔记, 爪哇程序人生">
    <meta name="description" content="你若花开，蝴蝶自来。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>MySQL学习笔记 | 爪哇程序人生</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

    <!-- 添加动态诗词 链：https://www.jinrishici.com/ -->
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>

<meta name="generator" content="Hexo 5.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">爪哇程序人生</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/navigate" class="waves-effect waves-light">
      
      <i class="fas fa-location-arrow" style="zoom: 0.6;"></i>
      
      <span>导航</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">爪哇程序人生</div>
        <div class="logo-desc">
            
            你若花开，蝴蝶自来。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/navigate" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-location-arrow"></i>
			
			导航
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/16.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySQL学习笔记</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/MySQL/">
                                <span class="chip bg-color">MySQL</span>
                            </a>
                        
                            <a href="/tags/%E9%9D%A2%E8%AF%95/">
                                <span class="chip bg-color">面试</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-11-07
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-08-27
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    24 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>[TOC]</p>
<h1 id="MySQL学习笔记"><a href="#MySQL学习笔记" class="headerlink" title="MySQL学习笔记"></a>MySQL学习笔记</h1><a id="more"></a>

<h2 id="1-MySQL基础知识"><a href="#1-MySQL基础知识" class="headerlink" title="1. MySQL基础知识"></a>1. MySQL基础知识</h2><blockquote>
<p>参考文章： <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg2MjEwMjI1Mg==&mid=2247503444&idx=3&sn=1e307a247838092dd22c4ccfcde71193&chksm=ce0e79d7f979f0c14c3e1e31e6ea951e5c71b13489257cd7df1607187a675860b120964d689c&mpshare=1&scene=24&srcid=1014ASyBj2RHmR9v2JM1GuDk&sharer_sharetime=1602682491574&sharer_shareid=c90d89447bde2426811e6f3556bd276d&key=835fcd8fd3846f683526f41906c3982d2f303c23d653002d6947ac25bb1c332794d85350653a9eac1b7a20380ac49ae95952ff218bffba0224cb5a3b581f20c568af940776c741d7fbffd77fb9647c67df3e940b7f59ea77e7b0ba4ebce9357650b49bdf376a089ce8f43f53669dd5d856948c18ccb46f14aef65a209fbb82f0&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=AZIVNnQgDS02YP26FewfMQA=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">mysql零散的基础知识</a> </p>
</blockquote>
<h3 id="1-1-SQL命令"><a href="#1-1-SQL命令" class="headerlink" title="1.1 SQL命令"></a>1.1 SQL命令</h3><blockquote>
<p>数据库SQL命令可以分为四组：DDL、DML、DCL和TCL</p>
</blockquote>
<img src="assets/SQL命令结构图.png" alt="image-20201107212233910" style="zoom:80%;" />

<p><strong>DDL(Data Definition Language)：</strong>  </p>
<blockquote>
<p>数据定义语言，处理数据库schemas和描述数据应如何驻留在数据库中</p>
</blockquote>
<p><strong>DML(Data Manipulation Language)：</strong> </p>
<blockquote>
<p>数据操纵语言，包括常见的SQL语句，用于存储、修改、检索和删除数据库中的数据</p>
</blockquote>
<p><strong>DCL(Data Control Language)：</strong> </p>
<blockquote>
<p>数据控制语言，包含如Grant之类的命令，主要涉及数据库系统的权限等控件</p>
</blockquote>
<p><strong>TCL(Transaction Control Language)：</strong> </p>
<blockquote>
<p>事务控制语言，用于处理数据库中的事务</p>
</blockquote>
<h3 id="1-2-数据库范式"><a href="#1-2-数据库范式" class="headerlink" title="1.2 数据库范式"></a>1.2 数据库范式</h3><blockquote>
<p>现在数据库范式最多满足3NF，普遍认为范式过高虽然对数据关系有更好的约束性，但也导致数据关系表增加而令数据库IO更易繁忙</p>
</blockquote>
<p><strong>第一范式：</strong></p>
<blockquote>
<p>第一范式要求数据库中的所有字段列都是单一属性，不可再分的。</p>
</blockquote>
<p><strong>第二范式：</strong> </p>
<blockquote>
<p>在满足第一范式的基础上，数据库中的表不存在非关键字段对任意关键字段的部分依赖</p>
</blockquote>
<p><strong>第三范式：</strong> </p>
<blockquote>
<p>在满足第二范式的基础上，所有的非主键列之间不存在传递依赖</p>
</blockquote>
<p>数据库设计时，遵循范式和反范式一直都是一个颇受争议的问题。遵循范式对数据关系有更好的约束性，并且减少数据冗余，可以更好的保证数据一致性。而反范式则是为了获得更好的性能。因此实际中要选择适合自己业务场景的。</p>
<p>反范式设计时，要考虑到关系表之间的<strong>插入异常</strong>、<strong>更新异常</strong>和<strong>删除异常</strong>。</p>
<h3 id="1-3-横表纵表"><a href="#1-3-横表纵表" class="headerlink" title="1.3 横表纵表"></a>1.3 横表纵表</h3><h3 id="1-4-数据类型"><a href="#1-4-数据类型" class="headerlink" title="1.4 数据类型"></a>1.4 数据类型</h3><p><strong>整数类型(byte)：</strong> BIT、BOOL、TINY INT(1)、SMALL INT(2)、 MEDIUM INT(3)、INT(4)、BIG INT(8)</p>
<p><strong>浮点数类型：</strong> FLOAT(4)、DOUBL(8)、DECIMAL</p>
<p><strong>字符串类型：</strong> CHAR、VARCHAR、TINY TEXT、 TEXT、MEDIUM TEXT、 LONG TEXT、TINY BLOB、BLOB、MEDIUM BLOB、LONG BLOB</p>
<p><strong>日期类型：</strong> DATE、TIME、YEAR、DATETIME、TIMESTAMP</p>
<p>其他数据类型：ENUM、BINARY</p>
<blockquote>
<p><strong>CHAR和VARCHAR的区别什么？</strong></p>
</blockquote>
<ul>
<li>CHAR(n)和VARCHAR(n)的长度n都代表存放字符的个数，超过设定长度n的字符串会被截断 </li>
<li>CHAR是固定长度，VARCHAR是可变长度</li>
<li>CHAR无论是否存满都会占用指定长度，不足的补空；VARCHAR只占用实际字符的长度，超出会截断</li>
<li>CHAR的长度上限是255，VARCHAR是65535</li>
</ul>
<blockquote>
<p><strong>BLOB和TEXT的区别是什么？</strong></p>
</blockquote>
<ul>
<li>BLOB是一个<strong>二进制对象</strong>，可以容纳可变数量的数据</li>
<li>TEXT是一个不区分大小写的BLOB，保存的是<strong>字符数据</strong></li>
</ul>
<h2 id="2-MySQL架构"><a href="#2-MySQL架构" class="headerlink" title="2. MySQL架构"></a>2. MySQL架构</h2><blockquote>
<p>待完成。   <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI1MTIzMzI2MA==&mid=2650565395&idx=1&sn=e9c779d36d944fa13703d9b8c2fd88b2&chksm=f1fedd90c6895486fb19073d3b1016d8ec4ca9cc13a5a87c198164a4ca683d193fd687e95840&scene=0&xtrack=1&key=e06e340bd7692e7ccc5311bb7eaa5a0d03ea4713c20c146872bf4607bee010784ef3ffdb4da9542a6cd49e6f2e471ea59aa59ee6c8bc84543c1da7e88392dbee7724847c1548a1dcf6bbeb45e9520f2a7b56b824cc8536c41a193bff45db1244a76dc0c8d882d97656c32ad70820e93c9a47f87b6c3de1d6011136fcbbc58dc1&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=Af5ZwF/scurohiRR5ZXz03s=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">为什么别人能用好MySQL？</a>  </p>
<p>MySQL的逻辑架构可以分为四层，包括连接层、服务层、引擎曾和存储层。（InnoDB引擎下）</p>
<ul>
<li>连接层：负责处理客户端的连接以及权限的认证</li>
<li>服务层：定义有许多不同的模块，包括权限判断，SQL接口，SQL解析，SQL分析优化，缓存查询的处理以及部分内置函数执行等。MySQL的查询语句在读物曾进行解析、优化、缓存以及内置函数的实现和存储。</li>
<li>引擎层：负责MySQL中数据的存储和提取。MySQL中的服务器层不管理事务，事务是由存储引擎实现的，使用最广泛的存储引擎为InnoDB，其他不支持事务。</li>
<li>存储层：负责将数据存储到设备的文件系统中。</li>
</ul>
</blockquote>
<img src="assets/image-20201125200416543.png" alt="image-20201125200416543" style="zoom:80%;" /> 



<h2 id="3-MySQL存储引擎"><a href="#3-MySQL存储引擎" class="headerlink" title="3. MySQL存储引擎"></a>3. MySQL存储引擎</h2><blockquote>
<p>参考文章： <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg2MjEwMjI1Mg==&mid=2247492928&idx=3&sn=09b88a89ef9c742d7a9d2d9d0eb93eba&chksm=ce0e52c3f979dbd58f039f197c3b88972addd72b4ee72df23d4bb5e8d6ca66b684fbb692c07f&scene=0&xtrack=1&key=e034db9a26a6579db731d5a6725742b6d2ce8046ca9d607206c72a754ede7a2ae2b36e2d5a564c6e1287ffbf5215cffb6584d6321a974c7cc8cb408b145ea760e682bf0ad25f743247a4bb86ef5d1a504e00fe7a5cb0a33e15514e6c0cf997dc3c2dced71ec34e47e50ff6cdbdf8e2200b9641bc93d710e4eda04c00a853de2a&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=AfLZNfcbdI+feRZ+DkWDxiE=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">MySQL存储引擎 - InnoDB-一棵树可以放多少数据</a>  </p>
</blockquote>
<blockquote>
<p>存储引擎是MySQL的组件，用于处理不同<strong>表类型</strong>的SQL操作。不同的存储引擎提供不同的存储机制、索引技巧、锁定水平等功能。  存储引擎是针对数据表的，每个表创建时不指定则会使用默认引擎。</p>
</blockquote>
<h3 id="3-1-存储引擎的设置和修改"><a href="#3-1-存储引擎的设置和修改" class="headerlink" title="3.1 存储引擎的设置和修改"></a>3.1 存储引擎的设置和修改</h3><p><strong>查看存储引擎：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 查看支持的存储引擎</span>
<span class="token keyword">SHOW</span> ENGINES

<span class="token comment" spellcheck="true">-- 查看默认存储引擎</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'storage_engine'</span>

<span class="token comment" spellcheck="true">--查看具体某一个表所使用的存储引擎，这个默认存储引擎被修改了！</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span>

<span class="token comment" spellcheck="true">--准确查看某个数据库中的某一表所使用的存储引擎</span>
<span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token operator">like</span> <span class="token string">'tablename'</span>
<span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token keyword">from</span> <span class="token keyword">database</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'tablename'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>设置存储引擎：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 建表时指定存储引擎。默认的就是INNODB，不需要设置</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span>CSV

<span class="token comment" spellcheck="true">-- 修改存储引擎</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span>

<span class="token comment" spellcheck="true">-- 修改默认存储引擎，也可以在配置文件my.cnf中修改默认引擎</span>
<span class="token keyword">SET</span> default_storage_engine<span class="token operator">=</span>NDBCLUSTER<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-2-常见存储引擎"><a href="#3-2-常见存储引擎" class="headerlink" title="3.2 常见存储引擎"></a>3.2 常见存储引擎</h3><blockquote>
<p>MySQL常见的存储引擎有 InnoDB、MyISAM、Memory、NDB，其中InnoDB是默认引擎。</p>
</blockquote>
<p><strong>InnoDB存储引擎</strong> </p>
<ul>
<li>InnoDB支持事务，面向在线事务处理(OLTP)的应用。<strong>这也是MySQL将默认引擎改为InnoDB的重要原因之一。</strong></li>
<li>InnoDB支持外键，MyISAM不支持，对有外键的InnoDB表转成MyISAM会失败。</li>
<li>InnoDB是聚簇索引，数据文件放在主键索引的叶子节点上，因此必须要有主键，主键索引效率高，使用辅助索引需要进行主键索引的回表查询（覆盖索引除外）。</li>
<li>InnoDB支持最小锁粒度是行锁，数据并发性能更好。<strong>这也是改用InnoDB引擎的重要原因之一。</strong></li>
<li>InnoDB不保存表的具体行数，执行 <code>select count(1) from [tablename]</code> 时需要扫描全表；而MyISAM有数据行计数变量，速度更快。</li>
<li>MySQL5.5.8版本之后，将默认存储引擎改成InnoDB。</li>
</ul>
<p><strong>MyISAM存储引擎</strong> </p>
<ul>
<li>MyISAM引擎不支持事务，主要面向一些OLAP数据库应用。</li>
<li>MyISAM引擎的索引与InnoDB不同的是，其索引与实际数据是分离的，索引中叶子节点存放的是具体数据的地址，是非聚集索引，主键索引和辅助索引相互独立，叶子节点中都存放了数据文件的指针。</li>
<li>MyISAM支持的最小锁粒度是表锁，一个更新语句会锁定整张表，并发性能低，安全性高。</li>
<li>MyISAM中保存了表的具体行数，查询数量时会直接读取计数变量返回，速度很快。</li>
<li>MyISAM引擎支持全文索引，InnoDB在5.6后才加入了全文索引。</li>
<li>MyISAM引擎更注重性能，速度较快一些。</li>
</ul>
<p><strong>Memory存储引擎</strong> </p>
<ul>
<li>Memory存储引擎将表中的数据放在内存中，速度更快，但是不支持持久化。</li>
</ul>
<h2 id="4-MySQL索引"><a href="#4-MySQL索引" class="headerlink" title="4. MySQL索引"></a>4. MySQL索引</h2><blockquote>
<p>参考文章： <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAwNDA2OTM1Ng==&mid=2453147214&idx=1&sn=d6ef2e8b8c139db9dc302753050f535e&chksm=8cfd2ccdbb8aa5db91198f30c6968b1ec92525887627bd7cae10a713ab8f4bf06365c3c17223&mpshare=1&scene=24&srcid=1022j7TO5jHev6IPdSbLZ79i&sharer_sharetime=1603340755611&sharer_shareid=c90d89447bde2426811e6f3556bd276d&key=5d2345c4aa1f52aaf825be37640a0b159e9539d8e5830feeca500a629fd9f8078c25bc935d814b4cd141ab30f039a9642f8ce52e77f44fb6c167c48ebdd57ff4e3fd9a22c7b571b447af00fe10d0fbf7f36ddf54141f8cc267f065ebc57772861063c0c27ecfc389689ccc4535dc79ea7cef89ca9e74df68c3a0841bd1e7e3bb&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=AbAkE7xGgvGeXvDTs2+UCUY=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">一口气搞懂MySQL索引所有知识点</a> </p>
</blockquote>
<h3 id="4-1-索引的介绍"><a href="#4-1-索引的介绍" class="headerlink" title="4.1 索引的介绍"></a>4.1 索引的介绍</h3><blockquote>
<p>索引是帮助MySQL高效获取数据的数据机构，类似一本书的目录索引。</p>
</blockquote>
<p>通常所说的索引，有聚集索引、覆盖索引、组合索引、前缀索引、唯一索引等，默认都是使用B+树的结构组织索引。</p>
<p><strong>使用索引的好处和坏处</strong></p>
<p><strong>好处：</strong> </p>
<ul>
<li>索引可以提高数据检索的效率，降低数据库的<strong>IO</strong>成本</li>
<li>通过索引列对数据进行排序，降低了数据排序对<strong>CPU</strong>的消耗<ul>
<li>索引列会自动排序，包括单列索引和组合索引</li>
<li>如果按照索引列进行排序，order by 语句的效率会非常高</li>
</ul>
</li>
</ul>
<p><strong>坏处：</strong> </p>
<ul>
<li>索引会占据磁盘空间</li>
<li>索引虽然能够提高数据查询效率，但是会降低数据更新的效率，因为每次增删改数据操作是，都要保存或更新相应的索引文件。</li>
</ul>
<h3 id="4-2-索引的类型"><a href="#4-2-索引的类型" class="headerlink" title="4.2 索引的类型"></a>4.2 索引的类型</h3><ul>
<li><strong>唯一索引：</strong>索引列中的值必须是唯一的额，但是允许为null值</li>
<li><strong>主键索引：</strong>特殊的唯一索引，值唯一且不允许为null值</li>
<li><strong>普通索引：</strong>MySQL中基本索引类型，允许列值重复，也允许为null</li>
<li><strong>全文索引：</strong>只能在CHAR、VARCHAR、TEXT类型字段上创建全文索引。当字段长度比较大时，普通索引中使用like进行模糊查询效率比较低，可以使用全文索引 </li>
<li><strong>空间索引：</strong>5.7后支持全文索引，支持OpenGIS集合数据模型</li>
<li><strong>前缀索引：</strong>在CHAR、VARCHAR、TEXT类型的列上创建索引时，可以指定索引列的长度，即列内容的前缀进行索引。</li>
</ul>
<p>按照索引列的数量分类</p>
<ul>
<li><strong>单列索引</strong></li>
<li><strong>组合索引：</strong>组合索引使用时要遵循最左前缀匹配元组，条件允许的情况下使用组合索引替代多个单列索引</li>
</ul>
<h3 id="4-3-索引的数据结构"><a href="#4-3-索引的数据结构" class="headerlink" title="4.3 索引的数据结构"></a>4.3 索引的数据结构</h3><p><strong>Hash表：</strong></p>
<p>Hash表在等值查询时效率很高，但是不支持范围快速查找，范围查找时还是只能通过扫描全表方式；因此不适合作为经常需要查找和范围查找的数据库索引。</p>
<p><strong>二叉查找树：</strong></p>
<p>二叉树正常情况下可以进行折半查找而减少IO次数，但是二叉树不稳定，容易形成单链，查找时仍然很复杂，这种不稳定的结构选择设计时会尽量避免。</p>
<p><strong>平衡二叉树：</strong></p>
<p>平衡二叉树除了具备二叉查找树的特点，最主要的特征就是左右两个子树的层级最多相差1，在插入删除数据时要使用左旋/右旋操作来保持二叉树的平衡。平衡二叉树的查询性能最接近二分查找法，但是仍有一些不足之处：</p>
<ul>
<li>时间复杂度和树高有关，每个节点的读取对应一次磁盘IO操作，数据量大时查询性能会比较差</li>
<li>平衡二叉树不支持范围快速查找，范围查询时要从根节点进行多次遍历</li>
</ul>
<p><strong>B树：</strong></p>
<blockquote>
<p>MySQL的数据是存储在磁盘文件中的，查询处理数据时，需要把磁盘中的数据加载到内存中，磁盘IO操作非常耗时，因此我们优化的重点就是要尽量减少磁盘IO操作的次数。二叉树访问时每个节点就会发生一次磁盘IO，因此可以通过降低树的高度来减少磁盘IO的次数。</p>
<p>二叉树一个节点的数据结构为一个val+两个children指针，大概16(8+4*2)字节，而InnoDB一次IO默认会读取一页的数据量(16K)，这样每次IO操作数据空间利用率极低，为了最大化利用一次IO空间，就是在每个节点中存放多个元素，即每个节点存储更多的数据，这样就能将树的高度降的很低，这种结构就称为B树。</p>
</blockquote>
<ul>
<li><strong>B树是一种多叉平衡查找树，特点有：</strong><ul>
<li>B树的节点中存储着多个元素，每个内节点有多个分叉</li>
<li>节点中的元素包含键值和数据(data)，按照键值从小到大排列，即所有的节点中都存储了数据</li>
<li>父节点中的元素不会出现在子节点中</li>
<li>所有的叶子节点都位于同一层，即叶子有着相同的深度，叶子节点之间没有指针连接</li>
</ul>
</li>
<li>B树结构图</li>
<li>使用B树进行查找的过程：<ul>
<li>B树每个节点中的数据是一次IO操作读取出来的</li>
<li>B树种每个节点种存放许多个键值，IO操作读取到内存种后，会进行遍历比较，再查找指定的节点或根据键值返回数据</li>
<li>多叉树、每个节点存放多个键值，大大减少了树的高度，减少了磁盘IO的次数</li>
</ul>
</li>
<li>B树的不足点：<ul>
<li>B树不支持范围查询的快速查找，如果要进行范围查询，仍然是要从根节点多次遍历查询</li>
<li>因为B树节点中存放多个键以及对应的data，data对应数据库表的一行数据，随着表中的列增加，data占用空间变大，则一个节点中可以存放的数据个数就会减少，树会变高，查询时磁盘IO次数也会增加。</li>
</ul>
</li>
</ul>
<p><strong>B+树：</strong> </p>
<blockquote>
<p>B+树是在B树的基础上进行了改造，B+树相对B树的改变主要有：</p>
<ul>
<li>B+树<strong>只有叶子节点才会存储数据</strong>，非叶子节点只存放键(进行比较，可以覆盖索引)</li>
<li>B+树<strong>叶子节点之间使用双向指针连接</strong>，最底层叶子节点形成了双向有序链表</li>
<li>B+树由于只在叶子节点中存放数据，因此<strong>叶子节点中包含了所有的索引项</strong>(查找并返回数据)</li>
</ul>
<p>由于数据都放在了叶子节点中，非叶子节点只存放键值，<strong>每个节点中可以存放更多的索引键值</strong>，因此从理论上讲B+树高度是要比B树低的。</p>
<p>虽然非叶子节点中不存放数据，但是也存在<strong>覆盖索引</strong>的情况，如果索引中数据(key/id)满足要求，也可能直接返回，无需检索到最底层的叶子节点。</p>
</blockquote>
<ul>
<li><p><strong>等值查询：</strong></p>
<blockquote>
<p>B+树进行等值查询时，在叶子节点找到节点时，取出对应的data，如果data是实际的数据(<strong>InnoDB中叶子节点存放数据</strong>)则直接返回；如果是对应的地址(<strong>MyIsam中存放的是磁盘地址</strong>)，则根据磁盘地址到磁盘中取出数据，完成查询。</p>
</blockquote>
</li>
<li><p><strong>范围查询：</strong></p>
<blockquote>
<p>B+树进行范围查询时，首先进行范围左端点的查询，与等值查询一样完成当前值的查询，之后会直接使用叶子节点的链表进行后续的查询，读取其他磁盘页，最终完成整个范围查询（叶子节点中整体有序）。</p>
</blockquote>
</li>
<li><p><strong>总结：</strong>B+树保证了等值查询是快速的，也保证了范围查询的快速查找。</p>
</li>
</ul>
<h3 id="4-4-索引的使用"><a href="#4-4-索引的使用" class="headerlink" title="4.4 索引的使用"></a>4.4 索引的使用</h3><blockquote>
<p>具体索引使用过程，以MyIsam存储引擎中的索引和InnoDB存储引擎中索引的使用不同来介绍</p>
</blockquote>
<p><strong>MyIsam存储引擎：</strong> </p>
<blockquote>
<p>MyIsam引擎中也是使用的B+树构建索引树，叶子节点存放的<strong>键是列的值</strong>，data是<strong>索引所在行的磁盘地址</strong>。</p>
</blockquote>
<p>MyIsam中的主键索引和辅助索引的结构是完全一样的，叶子节点存储的数据都是记录行所在的磁盘地址，查询数据时，最终要根据磁盘地址读取数据。</p>
<p>**InnoDB存储引擎： ** </p>
<blockquote>
<p>InnoDB存储引擎相比于MyIsam可以定义自增主键，且主键索引更为特殊，也叫做聚簇索引，所有非主键索引都叫做辅助索引。</p>
<p><strong>规则：</strong> InnoDB会将定义的主键列作聚簇索引；如果没有定义主键则会选择第一个不为null的唯一索引作聚簇索引；如果都没有，则会生成一个隐式字段构建聚簇索引。</p>
</blockquote>
<ul>
<li><strong>聚簇索引：</strong> InnoDB的索引中，只有聚簇索引的叶子节点存放data数据，使用主键查询到叶子节点后返回数据</li>
<li><strong>辅助索引：</strong> 辅助索引的叶子节点存放的都是<strong>主键值</strong>，使用辅助索引时会先查询到叶子节点中的主键，根据主键值去到聚簇索引中进行<strong>回表查询</strong>data</li>
<li><strong>联合索引：</strong> 联合索引创建时，是以联合索引中列的数据进行排序，因此使用联合索引进行查询是，要符合最左匹配原则，即检索列的顺序要和创建索引时顺序一致，否则不会走索引。</li>
<li><strong>覆盖索引：</strong> 覆盖索引是一种常见的优化手段，即在使用辅助索引时，要先拿到主键索引再回表查询数据，如果当前所有中包含了需要查询的所有内容（字段值+主键值），则不需要进行主键的回表查询，即覆盖索引。</li>
</ul>
<p><strong>数据库索引优化手段：</strong></p>
<ol>
<li><p>避免回表</p>
<img src="assets/image-20201108193036198.png" alt="image-20201108193036198" style="zoom:80%;" />
</li>
<li><p>使用联合索引</p>
<ul>
<li>使用联合索引替代多个单列索引，不仅可以<strong>节省空间</strong>，还<strong>更容易使用到覆盖索引</strong></li>
<li>联合索引创建时，将频繁使用、区分度高的列放在前边</li>
<li>如果当前索引存在频繁查询的返回列，可考虑将此列加入联合索引，更容易使用覆盖索引减少回表查询</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>为什么推荐使用整型自增主键而不是选择UUID？</strong> </p>
</blockquote>
<ul>
<li>UUID是字符串，比整型消耗更多的存储空间</li>
<li>B+树查找时要进行节点值的比较，整型值要比字符串更容易比较（字符串会依次比较每一个字符）</li>
<li>自增的整型索引在磁盘中存储时会连续存储，读取时也是连续；而UUID随机产生，读取时表中上下两条数据分散的，范围查询时效果差一些</li>
<li>插入或删除数据时，整型自增主键建树时不会破坏树结构，UUID新增数据时可能会引起树结构的重新构建</li>
</ul>
<h3 id="4-5-索引的使用语句"><a href="#4-5-索引的使用语句" class="headerlink" title="4.5 索引的使用语句"></a>4.5 索引的使用语句</h3><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">---创建索引        如果是BLOB、TEXT类型，必须指定length </span>
<span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span> <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexname<span class="token punctuation">]</span> <span class="token keyword">ON</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span><span class="token punctuation">(</span>columnName<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">---修改表结构(添加索引) </span>
    <span class="token comment" spellcheck="true">---- PRIMARY Key / UNIQUE [indexname] / INDEX [indexname] / FULLTEXT [indexname]</span>
    <span class="token comment" spellcheck="true">---- 主键索引        唯一索引                普通索引            全文索引</span>
<span class="token keyword">ALTER</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span> <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span> <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexname<span class="token punctuation">]</span><span class="token punctuation">(</span>columnname<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">---删除索引</span>
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexname<span class="token punctuation">]</span> <span class="token keyword">ON</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span>

<span class="token comment" spellcheck="true">---查看索引信息    \G用来格式化输出信息</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>tablename<span class="token punctuation">]</span> \G<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-MySQL事务"><a href="#5-MySQL事务" class="headerlink" title="5. MySQL事务"></a>5. MySQL事务</h2><blockquote>
<p>参考文章： <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzUyNjQxNjYyMg==&mid=2247489683&idx=2&sn=0bfbe8def3331404ef13a0da7b10334e&chksm=fa0e7712cd79fe04c2bc72866ee72632984391ceab0f5379c3ea37819434434c8033fab26418&mpshare=1&scene=24&srcid=&sharer_sharetime=1591506346818&sharer_shareid=c90d89447bde2426811e6f3556bd276d&key=e06e340bd7692e7ca73a5ff5ea8e64087275cf8ba3ec53ab34a4b93cb277d0ac2306a1b75f8bf94a82adf2873dce1eca8ad689701d1ecb711be32b265065dc484b3a2006f8889fb116ea159f06797c1777a7619acaa8227ce2729f7b2e54b2585f66174f609777b05c7db36d3c1d777d64822850858c451258d6e23ea2a1a684&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=Ae/+QZtcKepQB9ivq5tYokc=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">彻底搞懂MySQL事务日志</a>  <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI4Njg5MDA5NA==&mid=2247486783&idx=1&sn=5d794bbb97b09a9b097200ac4790d058&chksm=ebd74c3edca0c5288742261c856c907022e4524d70ef535986da3492ce4af8e84936a2555d8c&scene=0&xtrack=1&key=5d2345c4aa1f52aaae2921615d93e13c63f7da0fa610e14c7abecf071021117a61c0426a8e521469016ad9f73e4b34cd7dfd9703e1a28af7384a71f14bf659c7cabff0d45b67838b639a11fb3c8255dce17a992c7e46c6f38661edf8f92b2d20441f7b03b6de2435d67259eceaffb05c55d9407309a5f66abf5a7bb4ff5131a4&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=AcBeXoujtIA7DwjZRNfjukg=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">MySQL事务日志-原来MySQL面试还会问这些</a>  </p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg2MjEwMjI1Mg==&mid=2247501550&idx=3&sn=1a212bfc737981df2c942860e8e7dbe1&chksm=ce0e716df979f87b83ca1719f330c4fa1b4b9f1823ceb1483ae0539fc2105c3029efc06133e3&mpshare=1&scene=24&srcid=0916Evt5W1Nj6vj2ViKufZt1&sharer_sharetime=1600214786578&sharer_shareid=c90d89447bde2426811e6f3556bd276d&key=29a501fbe6d282a4522669cadcee88587f303ee12610b92fc896f03adf3e8de693cd5af938659a6d2a0069d00061b7e553b0ba825de6e09e76d79139cfedfb9f635df2c0358e16dd23b3240c0acab041d3726f874952464c115baa9e213dcc13ac315625996a283ba874a13e83f268400934e60dc6fbaa3ab3bd7e6203de4e7a&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=AbuaVTwtvxiuIecRXmQVX00=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">必须了解的 MySQL 三大日志</a>  <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAwNDA2OTM1Ng==&mid=2453147047&idx=1&sn=2ba0aa166bb7686ec90af4cded01f254&chksm=8cfd2f24bb8aa63207d72df02c01b1ad1dce63a39302ec1b73b868c44ea807c78081f6d5a9ee&mpshare=1&scene=24&srcid=1013o3NNMQV20q0AWX2pBnEF&sharer_sharetime=1602557171611&sharer_shareid=c90d89447bde2426811e6f3556bd276d&key=741c320a8f8c2b40fac60692bb38d91f787934c7273c5a8789cf488987017702b07a200c737e8cebb48686606a6c3e7f32fce0c0df727e62080e414d4e8b1479e906f70d0a0591e408a7e8947680191d40b21b8b4b0fb31fca02a0617852830dcf27171671d4c919dd5c2db96d7cf37e5a4944f6f3ed93d79c09992dc68181f7&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=ASqhmE3uXyU2dBJ5UDHImwk=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">MySQL事务与MVCC机制</a>  <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&mid=2247486625&idx=2&sn=e235dab2757739438b8f33d205a9327f&chksm=cea2436af9d5ca7c9a1a8db9d020f71205687beca23ac958f9c9a711ee0185cab30173ad2b1a&scene=0&xtrack=1&key=e034db9a26a6579d2c69e36e4cd625c1143bd4da8bb58de5524ce23bb7dc3755152656ca4a68cb81e8e2ea01e4a06ebb75f8cd44083ffb34f8336fa0cbad5c65213aae273391f480dd43c45b2f08413f720205d6bb5115969ab564dfc831867c54f6486f55c892465769bb998e1a1f2f76533c60bd79fc218c65e3a512953e70&ascene=14&uin=MTU0NTA1NjAwMQ==&devicetype=Windows+10+x64&version=62090523&lang=zh_CN&exportkey=ASpvLKcaNTSftOGcA7F/YJs=&pass_ticket=WRKQP3G1bylvRFp+5dyKejmrjQcdw0gXiZjVA4XQVd8YXHZJBv66H4lgfERtCxdO&wx_header=0">MySQL事务的10个问题</a> </p>
</blockquote>
<h3 id="5-1-事务特性（ACID）"><a href="#5-1-事务特性（ACID）" class="headerlink" title="5.1 事务特性（ACID）"></a>5.1 事务特性（ACID）</h3><ul>
<li>原子性（Atomicity）：语句要么全执行，要么全不执行，是事务最核心的特性，事务本身就是以原子性来定义的，主要是基于<strong>undo log</strong>日志来实现的。</li>
<li>一致性（Consistency）：事务追求的最终目标，一致性的实现需要数据库层面的保障，也需要应用层面的保障。数据库的完整性约束没有被破坏。</li>
<li>隔离性（Isolation）：保证事务执行尽可能不受其他事务影响，InnoDB默认的隔离级别是RR，RR的实现主要基于<strong>锁机制（行锁）</strong>、<strong>数据的隐藏列（MVCC）</strong>、<strong>undo log</strong>、和类<strong>next-key lock机制</strong>。</li>
<li>持久性（Durability）：保证事务提交后不会因为宕机等原因导致数据丢失，主要基于<strong>redo log</strong> 实现。</li>
</ul>
<h3 id="5-2-并发读写问题"><a href="#5-2-并发读写问题" class="headerlink" title="5.2 并发读写问题"></a>5.2 并发读写问题</h3><blockquote>
<p>在并发情况下，MySQL的同时读写可能会导致三类问题：脏读、不可重复读、幻读</p>
</blockquote>
<ul>
<li><strong>脏读：</strong>当前事务中读取到其他事务未提交的数据，就是脏读<ul>
<li>事务A读取数据时，读取到事务B未提交的数据，而事务B最后没有顺利提交，导致事务回滚，这时事务A读到的内容就是脏数据。</li>
</ul>
</li>
<li><strong>不可重复读：</strong>在事务A中现后两次读取同一个数据，但两次读取的结果不一样；<ul>
<li>脏读是读到了其他事务未提交的数据，而不可重复读是读取到了其他事务新提交的内容，即事务A在执行的过程中，数据被其他事务修改了</li>
</ul>
</li>
<li><strong>幻读：</strong>事务A中按照某个条件现后两次查询数据库，两次结果的行数不同，这种现象称为幻读。<ul>
<li>不可重复读是两次读取的数据发生了变化，重在更新；幻读则是两次读取的数据行数不同，重在有新数据插入。</li>
</ul>
</li>
</ul>
<h3 id="5-2-事务隔离级别"><a href="#5-2-事务隔离级别" class="headerlink" title="5.2 事务隔离级别"></a>5.2 事务隔离级别</h3><blockquote>
<p>参考文章：<a target="_blank" rel="noopener" href="https://tech.meituan.com/2014/08/20/innodb-lock.html">Innodb中的事务隔离级别和锁的关系</a>  </p>
</blockquote>
<p><strong>事务的隔离级别</strong></p>
<ul>
<li>Read UnCommitted（读未提交）：可能发生脏读、不可重复读、幻读</li>
<li>Read Committed（读已提交）：不会发生脏读，可能发生不可重复读、幻读</li>
<li>Repeatable Read（可重复读）：不会发生脏读、不可重复读，可能发生幻读</li>
<li>Serializable（可串行化）：不会发生脏读、不可重复读、幻读</li>
</ul>
<h3 id="MVCC"><a href="#MVCC" class="headerlink" title="MVCC"></a><strong>MVCC</strong></h3><blockquote>
<p>MVCC（Muti-Version Concurrency Control，多版本并发控制协议），就是用来实现可重复读隔离级别的。</p>
<p>MVCC的特点就是，<strong>在同一时刻，不同事务可以读取到不同版本的数据</strong>，从而解决脏读和不可重复读的问题。</p>
</blockquote>
<ul>
<li>MVCC实际上就是通过数据的<strong>隐藏列</strong>和<strong>回滚日志（undo log）</strong>，实现多个版本数据的共存，这样的好处就是，使用MVCC读取数据时，不用加锁就可以避免同时读写的冲突。</li>
<li>MVCC的每一行数据重会保存隐藏列，如<strong>创建时版本号</strong>、<strong>删除时版本号</strong>、<strong>指向undo log的回滚指针</strong>。每次开始新的事务，版本号就会递增，MVCC机制下，事务会查询<strong>小于等于创建版本号</strong>和<strong>大于等于删除版本号</strong>的数据，来保证数据的可重复读。</li>
<li><strong>next-key lock：</strong> 行锁的一种，即Record Lock（行锁）+gap lock（间隙锁），RR级别下就是<strong>通过next-key lock来避免幻读现象</strong>，其会将查询数据的数据行以及数据行的间隙进行加锁。防止其他事务在这个间隙修改或插入数据。<ul>
<li>间隙锁必须保证查询条件有索引，否则会加表锁而不是行锁（无索引时扫描全表）</li>
</ul>
</li>
<li>MVCC是快照读来避免幻读，间隙锁是当前读中避免幻读</li>
</ul>
<h3 id="5-3-事务日志"><a href="#5-3-事务日志" class="headerlink" title="5.3 事务日志"></a>5.3 事务日志</h3><blockquote>
<p>MySQL日志系统是数据库的重要组件，用于记录数据库的更新和修改，在数据库发生故障时可以通过不同的日志记录恢复数据，日志系统决定着MySQL的鲁棒性和稳健性。</p>
<p>MySQL的日志有很多种，如二进制日志（bin log）、错误日志、查询日志、慢查询日志等，此外，InnoDB存储引擎还提供了两种日志，redo log（重做日志）和undo log（回滚日志）</p>
</blockquote>
<ul>
<li><p><strong>重做日志（redo log）：</strong> 重做日志是InnoDB引擎层的日志，用来记录事务操作引起数据的变化，记录的是<strong>数据页的物理修改</strong>。（即什么地方从什么改成了什么这样）</p>
<ul>
<li><strong>预写式技术（Write Ahead logging）</strong>：InnoDB引擎对数据的更新，是<strong>先将更新记录写入redo log日志</strong>，然后<strong>会在系统空闲的时候或是按照设定的更新策略将日志种的内容更新到磁盘中</strong>，这就是所谓的预写式技术，这种技术可以大大减少IO操作的频率，提升数据刷新的效率。</li>
<li><strong>脏数据刷盘：</strong>redo log日志的大小是固定的，为了能够持续不断的对更新记录进行写入，redo log中设置了两个标识位置，<strong>checkpoint（记录擦除的位置）</strong>和<strong>write_pos（记录写入的位置）</strong>。移动是循环的，类似圆周运动，当写位置追上擦除位置时，会停下来进行脏数据刷盘（即将redo log中的数据写入到磁盘中）。</li>
<li><strong>缓冲池（buffer pool）：</strong> 在内存中分配的一个区域，包含了磁盘中部分数据页的映射，作为访问数据库的缓冲。<ul>
<li>当请求读取数据时，会判断是否在缓冲池命中，如果未命中才会在磁盘上进行检索后放入缓冲池；</li>
<li>当请求写入数据时，会先写入缓冲池，缓冲池中修改的数据会定期刷新到磁盘中，即刷脏</li>
<li>当数据修改时，除了会修改缓冲池中数据，还会在redo log中记录当前操作，事务提交时，会根据redo log的记录的数据进行刷盘。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>二进制日志（bin log）</strong>：二进制日志（bin log）是服务层的日志，被称为归档日志。bin log 主要是记录数据库的变化情况，内容包括数据库所有的更新操作。所有涉及数据变动的操作，都要记录进二进制日志中。<strong>有了binlog可以很方便的对数据进行复制和备份，因而常用作主从数据的同步</strong>。</p>
<ul>
<li>redo log记录的是物理日志，即对某个数据进行了怎么样的修改；而<strong>binlog是逻辑日志</strong>，记录的是SQL语句的原始逻辑。</li>
<li>redo log是InnoDB引擎特有的，作用在引擎层；binlog是通过MySQL的服务层实现的，所有引擎都可以使用</li>
<li>redo log日志文件的空间固定，因此使用时是循环写入和擦除；binlog日志文件的空间不固定，写完会切换下一个文件，因此是追加写入，不会覆盖已有文件。</li>
</ul>
</li>
<li><p>一条SQL语句执行时，涉及到binlog和redo log 的读写：</p>
<img src="assets/image-20201125214003798.png" alt="image-20201125214003798" style="zoom:80%;" /> 

<ul>
<li>MySQL执行更新语句时，服务层进行语句的解析和执行，引擎层进行数据的提取和存储；同时在服务存对binlog写入，在引擎层进行redo log的写入。</li>
<li>对redo log写入时有两个阶段的提交，一个是binlog写入之前prepare状态的写入，二是binlog写入之后commit状态的写入，保证了binlog和redo log日志的一致性。</li>
</ul>
</li>
<li><p><strong>回滚日志（undo log）：</strong> 回滚日志也是InnoDB引擎提供的日志，是对数据进行回滚。在事务对数据库进行修改时，<strong>InnoDB引擎不仅会记录redo log，还会生成对应的undo log日志</strong>，如果事务失败执行rollback，事务回滚，就会<strong>利用undo log中的信息将数据回滚到之前的样子</strong>。</p>
<ul>
<li>与redo log不同的是，undo log也是逻辑日志，<strong>记录了SQL语句执行相关的信息</strong>，当发生回滚时，<strong>InnoDB引擎会根据undo log日志中的记录做与之前相反的工作。</strong></li>
<li>undo log日志有两个作用，一个是提供<strong>事务回滚</strong>，一个是实现<strong>MVCC</strong>。</li>
</ul>
</li>
</ul>
<h2 id="6-MySQL锁机制"><a href="#6-MySQL锁机制" class="headerlink" title="6. MySQL锁机制"></a>6. MySQL锁机制</h2><h2 id="7-MySQL主从复制"><a href="#7-MySQL主从复制" class="headerlink" title="7. MySQL主从复制"></a>7. MySQL主从复制</h2><blockquote>
<p>主从复制就是从原来的数据库复制一个完全一样的数据库，并保持主、从数据库数据的一致性。</p>
<p>主从复制的原理实际上就是通过binlog日志实现的，binlog日志中保存了数据库中所有SQL语句，通过对binlog日志中SQL的复制，然后再进行语句的执行即可实现从数据库与主数据库的同步。</p>
</blockquote>
<img src="assets/image-20201125215032778.png" alt="image-20201125215032778" style="zoom:80%;" /> 

<p>主从复制的过程如图，主要涉及到三个线程</p>
<ul>
<li>主服务器中的发送线程：负责将binlog日志发送到从服务器</li>
<li>从服务器上的I/O线程：用来读取主服务器发送过滤的binlog日志内容，并拷贝到本地中继日志中</li>
<li>从服务器的SQL线程：用来读取中继日志中关于数据更新的SQL语句并执行，实现主从数据一致</li>
<li>主从复制的好处有：<ul>
<li>通过复制实现数据的异地备份，避免数据丢失</li>
<li>实现架构的扩展，业务量越来越大时，I/O访问量过高时，采用多库存储，降低磁盘I/O频率</li>
<li>实现读写分离，使数据库能支持更大的并发</li>
<li>实现服务器的负载均衡，通过在主服务器和从服务器之间切分处理客户查询的负荷</li>
</ul>
</li>
</ul>
<h2 id="8-MySQL存储过程"><a href="#8-MySQL存储过程" class="headerlink" title="8. MySQL存储过程"></a>8. MySQL存储过程</h2><h2 id="9-MySQL优化"><a href="#9-MySQL优化" class="headerlink" title="9. MySQL优化"></a>9. MySQL优化</h2>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">shone</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://shonee.github.io/mysql-xue-xi-bi-ji/">http://shonee.github.io/mysql-xue-xi-bi-ji/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">shone</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/MySQL/">
                                    <span class="chip bg-color">MySQL</span>
                                </a>
                            
                                <a href="/tags/%E9%9D%A2%E8%AF%95/">
                                    <span class="chip bg-color">面试</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'rKdDOYBXeWyhIXTnI9VOk6gu-gzGzoHsz',
        appKey: 'Nnww7B3HOEUZ36LQCdBphN9i',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/daily-hard/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="Daily Hard (1)">
                        
                        <span class="card-title">Daily Hard (1)</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                             leetcode 57.插入区间 


题目描述：

给出一个无重叠的，按照区间起始端点排序的区间列表。
在列表中插入一个新的区间，你需要确保列表中的区间仍然有序且不重叠（如果有必要，可以合并区间）。

**示例1： ** 

输入： i
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-11-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="post-category">
                                    数据结构与算法
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Hard/">
                        <span class="chip bg-color">Hard</span>
                    </a>
                    
                    <a href="/tags/Algorithm/">
                        <span class="chip bg-color">Algorithm</span>
                    </a>
                    
                    <a href="/tags/Daily/">
                        <span class="chip bg-color">Daily</span>
                    </a>
                    
                    <a href="/tags/%E6%95%B0%E7%BB%84/">
                        <span class="chip bg-color">数组</span>
                    </a>
                    
                    <a href="/tags/%E6%8E%92%E5%BA%8F/">
                        <span class="chip bg-color">排序</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/hexo-da-jian-jing-tai-bo-ke/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="GitHub Pages 上使用 Hexo 搭建静态博客">
                        
                        <span class="card-title">GitHub Pages 上使用 Hexo 搭建静态博客</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            [TOC]
背景计算机作为一个技术更新迭代速度非常快的行业，只有不断学习才不会被时代抛弃，但是对新技术的学习还有进行积累并输出才可以学习更加透彻，因此每个人都应该有自己的积累和输出方式。
GitHub 提供的 Pags 功能可以用来作为静态
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-11-07
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Hexo/" class="post-category">
                                    Hexo
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Hexo/">
                        <span class="chip bg-color">Hexo</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="2621145115"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.5'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="/about" target="_blank">shone</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">69.3k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/shonee" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1048394082@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1048394082" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1048394082" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?7bc8c63dc080f8a8c553737fd00a5efc";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

    <!-- 给博客添加动态标签 -->
    <script type="text/javascript">
        var OriginTitile = document.title,
            st;
        document.addEventListener("visibilitychange", function () {
            document.hidden ? (document.title = "看不见我🙈~看不见我🙈~", clearTimeout(st)) : (document.title =
                "(๑•̀ㅂ•́) ✧被发现了～", st = setTimeout(function () {
                    document.title = OriginTitile
                }, 3e3))
        })
    </script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body>

</html>
